<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../static/css/weather.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/weather.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=search" />

    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>

    <py-env>
        - requests
    </py-env>
    <py-config type="json">
        {
          "packages": ["requests", "json"]
        }
      </py-config>
</head>
<body>
    <div class="main">
        <div class="s_b">
            <input type="search" placeholder="Search" id="input">
            <span class="search-icon material-symbols-outlined">search</span>
        </div>
        <div class="texts">
            <div class="weather">
                <py-script>
                    import requests
                    import json
                    
                    city = "Seoul"
                    apikey = "942dd98dc0208f33a49c831c13548e6d"
                    lang = "kr"
                    
                    api = f"""http://api.openweathermap.org/data/2.5/\
                    weather?q={city}&appid={apikey}&lang={lang}&units=metric"""
                    
                    result = requests.get(api)
                    
                    data = json.loads(result.text)
                </py-script>
                <img src="../static/src/img/7084486.png">
                <p class="temp"><py-script>data["main"]["temp"]</py-script><span>Â°C</span></p>
                <p class="wea">Cloudy</p>
            </div>
        </div>
    </div>
</body>
</html>
